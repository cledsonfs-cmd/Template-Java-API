CREATE SCHEMA IF NOT EXISTS template_java;

CREATE TABLE IF NOT EXISTS template_java.users (
    id serial4 NOT NULL,
    ativo boolean DEFAULT true,
    login character varying(255),
    password character varying(255),
    role smallint,
    CONSTRAINT users_pkey PRIMARY KEY (id),
    CONSTRAINT users_role_check CHECK (((role >= 0) AND (role <= 2)))
);

INSERT INTO "template_java"."users"
(id,login, password, ativo, role)
SELECT nextval('template_java.users_id_seq'::regclass),'adm@template.com', '$2a$10$sQafMsE0BBrMY6s5Wo1I7.3J0.50ZFSrw2kp7Cl68mjqyOVJcSSBm', true, 0
WHERE NOT EXISTS (SELECT 1 FROM "template_java"."users" WHERE login = 'adm@template.com');

CREATE TABLE IF NOT EXISTS template_java.menu_item (
    id int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
    expanded bool NULL,
    icon varchar(255) NULL,
    "label" varchar(255) NULL,
    pai int4 NULL,
    route varchar(255) NULL,
    ordenacao int4 NULL,
    CONSTRAINT menu_item_pkey PRIMARY KEY (id)
);

INSERT INTO template_java.menu_item (id, expanded, icon, "label", pai, route,ordenacao)
SELECT
nextval('template_java.users_id_seq'::regclass), false, '', 'Sistemas', 0, '',11
WHERE NOT EXISTS (SELECT 1 FROM "template_java".menu_item WHERE "label" = 'Sistemas');

INSERT INTO template_java.menu_item (id, expanded, icon, "label", pai, route,ordenacao)
SELECT
nextval('template_java.users_id_seq'::regclass), false, 'fas fa-tachometer-alt', 'Dashboard', 11, '/home',12
WHERE NOT EXISTS (SELECT 1 FROM "template_java".menu_item WHERE "label" = 'Dashboard');

INSERT INTO template_java.menu_item (id, expanded, icon, "label", pai, route,ordenacao)
SELECT
nextval('template_java.users_id_seq'::regclass), false, '', 'Relatórios', 0, '',21
WHERE NOT EXISTS (SELECT 1 FROM "template_java".menu_item WHERE "label" = 'Relatórios');

INSERT INTO template_java.menu_item (id, expanded, icon, "label", pai, route, ordenacao)
SELECT
nextval('template_java.users_id_seq'::regclass), false, '', 'Configurações', 0, '',31
WHERE NOT EXISTS (SELECT 1 FROM "template_java".menu_item WHERE "label" = 'Configurações');
INSERT INTO template_java.menu_item (id, expanded, icon, "label", pai, route, ordenacao)
SELECT
nextval('template_java.users_id_seq'::regclass), false, 'fas fa-users', 'Usuários', 31, '/usuarios',32
WHERE NOT EXISTS (SELECT 1 FROM "template_java".menu_item WHERE "label" = 'Usuários');